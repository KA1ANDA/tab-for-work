<div class="custom-input-container" [style.width]="width">
  <!-- <label *ngIf="label && type !='checkbox'" [for]="label">
    {{ label }} <span *ngIf="required" class="required-marker">*</span>
  </label> -->

  <!-- Text Input with Icon -->
  <div *ngIf="type === 'text'" class="input-with-icon" [class.has-icon]="hasIcon()" [class.icon-right]="iconPosition === 'right'">
    <div *ngIf="hasIcon()" class="input-icon" [innerHTML]="getSafeIcon()"></div>
    <input 
      [id]="label"
      type="text" 
      pInputText 
      [formControl]="formControl"
      [placeholder]="placeholder"
      [disabled]="disabled"
      (input)="updateValue($event)"
      [style.height]="height"
      [class.with-left-icon]="hasIcon() && iconPosition === 'left'"
      [class.with-right-icon]="hasIcon() && iconPosition === 'right'"
    />
  </div>
  
  <!-- Textarea with Icon -->
  <div *ngIf="type === 'textarea'" class="input-with-icon" [class.has-icon]="hasIcon()" [class.icon-right]="iconPosition === 'right'">
    <div *ngIf="hasIcon()" class="input-icon textarea-icon" [innerHTML]="icon"></div>
    <textarea 
      [id]="label"
      pInputTextarea
      [formControl]="formControl"
      [placeholder]="placeholder"
      [disabled]="disabled"
      (input)="updateValue($event)"
      [style.height]="height"
      [class.with-left-icon]="hasIcon() && iconPosition === 'left'"
      [class.with-right-icon]="hasIcon() && iconPosition === 'right'"
    ></textarea>
  </div>
  
  <!-- Dropdown with Icon -->
  <div *ngIf="type === 'dropdown'" class="input-with-icon" [class.has-icon]="hasIcon()" [class.icon-right]="iconPosition === 'right'">
    <div *ngIf="hasIcon()" class="input-icon dropdown-icon" [innerHTML]="icon"></div>
    <p-dropdown 
      [id]="label"
      [formControl]="formControl"
      [options]="options"
      [optionLabel]="optionLabel"
      [placeholder]="placeholder"
      [disabled]="disabled"
      (onChange)="updateValue($event)"
      [class.with-left-icon]="hasIcon() && iconPosition === 'left'"
      [class.with-right-icon]="hasIcon() && iconPosition === 'right'"
    ></p-dropdown>
  </div>
  
  <!-- Calendar with Icon -->
  <div *ngIf="type === 'calendar'" class="input-with-icon" [class.has-icon]="hasIcon()" [class.icon-right]="iconPosition === 'right'">
    <div *ngIf="hasIcon()" class="input-icon calendar-icon" [innerHTML]="icon"></div>
    <p-calendar 
      [id]="label"
      [formControl]="formControl"
      [placeholder]="placeholder"
      [disabled]="disabled"
      (onSelect)="updateValue($event)"
      [class.with-left-icon]="hasIcon() && iconPosition === 'left'"
      [class.with-right-icon]="hasIcon() && iconPosition === 'right'"
    ></p-calendar>
  </div>
  
  <!-- Checkbox (no icon support) -->
  <div *ngIf="type === 'checkbox'" class="checkbox-wrap">
    <p-checkbox
      [id]="label"
      [formControl]="formControl"
      [binary]="true"
      [label]="label"
      [disabled]="disabled"
      (onChange)="updateValue($event)"
    ></p-checkbox>

    
  </div>
  
  <!-- Error messages -->
  <small *ngIf="formControl?.invalid && formControl?.touched" class="error-message">
    <span *ngIf="formControl?.errors?.['required']">This field is required</span>
    <span *ngIf="formControl?.errors?.['email']">Please enter a valid email address</span>
    <!-- Add more validation messages as needed -->
  </small>
</div>